<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>个人中心</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="../static/js/jquery.min.js" th:src="@{/js/jquery.min.js}"></script>
    <link rel="stylesheet" href="../static/bootstrap/css/bootstrap.min.css" th:href="@{/bootstrap/css/bootstrap.min.css}">
    <script src="../static/bootstrap/js/bootstrap.min.js" th:src="@{/bootstrap/js/bootstrap.min.js}"></script>
    <link rel="stylesheet" href="../static/css/main.css" th:href="@{/css/main.css}">
    <link rel="stylesheet" href="../static/css/userInfo.css" th:href="@{/css/userInfo.css}">
</head>
<body>
<!-- 顶部导航栏 -->
<div class="topBar">
    <div class="container">
        <div class="col-md-6">
            <p>欢迎光临&nbsp;HK商城</p>
        </div>
        <div  class=" col-md-6 topNav">
            <ul class="breadcrumb">
                <li class="dropdown topLang">
                    <button class="btn dropdown-toggle" data-toggle="dropdown" th:if="${session.USER_ID!=null}"  >
                        欢迎,<i th:text="${session.USER_name}"></i>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li role="presentation">
                            <a th:href="@{/user/userInfo}">个人主页</a>
                        </li>
                        <li role="presentation">
                            <a th:href="@{/product/checkoutlist}">我的订单</a>
                        </li>
                        <li role="presentation">
                            <a th:href="@{/user/exitlogin}">退出登录</a>
                        </li>

                    </ul>
                    <a th:if="${session.USER_ID==null}" href="login.html" th:href="@{/user/login}"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>登录/注册
                    </a>
                </li>
                <li class="dropdown topLang">

                    <button type="button" class="btn dropdown-toggle" data-toggle="dropdown">
                        语言
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li role="presentation">
                            <a href="#">简体中文</a>
                        </li>
                        <li role="presentation">
                            <a href="#">English</a>
                        </li>
                    </ul>

                </li>
                <li>
                    <a href="#aboutUs">关于我们
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>
<!-- 搜索框部分 -->
<div class="container">
    <div class="col-md-3 bigLogo">
        <a th:href="@{/user/index}">
            <img src="../static/image/logo/biglogo.png" th:src="@{/image/logo/biglogo.png}" alt="HK网上商城">
        </a>
    </div>
    <div class="col-md-6 Search">
        <form th:action="@{/user/searchproduct}" method="post" enctype="multipart/form-data">
            <div class="input-group">
                <input type="text" class="form-control" name="keyword" placeholder="搜你想要">
                <span class="input-group-btn">
                        <button type="submit" class="btn btn-defalut"><span class="glyphicon glyphicon-search"></span>
                        </button>
                    </span>
            </div>
        </form>

    </div>
    <div class="col-md-3 Cart">
        <ul>
            <li>
                <a href="#">
                    <img src="../static/image/logo/wish.png" th:src="@{/image/logo/wish.png}" alt="心愿单">
                    <p th:if="${session.USER_ID!=null}" class="littleDot">0</p>
                </a>
            </li>
            <li>
                <a href="shoppingcart.html" th:href="@{/product/shoppingcart}">
                    <img src="../static/image/logo/cartLogo.png" th:src="@{/image/logo/cartLogo.png}" alt="购物车">
                    <p th:if="${session.USER_ID!=null}" th:text="${session.CART_num}" class="littleDot">0</p>
                </a>
            </li>
        </ul>

    </div>
</div>

<!--用户界面主体-->
<div class="pageMain">
    <div class="container">
        <div class="breadcrumbArea">
            <a th:href="@{/user/index}">首页</a> > <span>我的订单</span>
        </div>
    </div>
    <div class="listBody">
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <div class="listBox">
                        <div class="listNavBox">
                            <div class="boxHd">
                                <h3>订单中心</h3>
                            </div>
                            <div class="boxBd">
                                <ul>
                                    <li><a href="checkoutlist.html" th:href="@{/product/checkoutlist}">我的订单</a></li>
                                    <li><a>团购订单</a></li>
                                    <li><a>评价晒单</a></li>
                                    <li><a>话费充值订单</a></li>
                                    <li><a>以旧换新订单</a></li>

                                </ul>
                            </div>
                        </div>
                        <div class="listNavBox">
                            <div class="boxHd">
                                <h3>个人中心</h3>
                            </div>
                            <div class="boxBd">
                                <ul>
                                    <li><a class="active">我的个人中心</a></li>
                                    <li><a>消息通知</a></li>
                                    <li><a>购买资格</a></li>
                                    <li><a>现金账户</a></li>
                                    <li><a>现金券</a></li>
                                    <li><a>优惠券</a></li>
                                    <li><a>收货地址</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="listNavBox">
                            <div class="boxHd">
                                <h3>售后服务</h3>
                            </div>
                            <div class="boxBd">
                                <ul>
                                    <li><a>服务记录</a></li>
                                    <li><a>申请服务</a></li>
                                    <li><a>领取快递报销</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="listNavBox">
                            <div class="boxHd">
                                <h3>账户管理</h3>
                            </div>
                            <div class="boxBd">
                                <ul>
                                    <li><a>个人信息</a></li>
                                    <li><a>修改密码</a></li>
                                </ul>
                            </div>
                        </div>


                    </div>
                </div>
                <div class="col-md-9">
                    <div class="listMainBox ">
                        <div class="boxHd clearFix">
                            <div class="leftPart">
                                <h1 th:text="'用户账号：'+${user.name}">用户账号：</h1>
                                <!--<h3 th:if="${user.shoId}!=null" th:text="${user.shoId}">用户名：您还没有创建用户名哦~</h3>-->
                                <h3 th:text="'用户名：'+${user.shoId}">用户名：</h3>
                                <h3 th:text="'电话：'+${user.phone}">电话：</h3>
                                <h3 th:text="'邮箱：'+${user.email}" >邮箱：</h3>
                            </div>
                            <div class="rightPart">
                                <button class="btn btn-warning" data-toggle="modal" data-target="#changepassword" id="editPassword" th:value="${user.id}">修改密码</button>
                                <button class="btn btn-success" data-toggle="modal" data-target="#changeUserInfo" id="editInfo">编辑个人信息</button>
                            </div>
                            <!--更改用户密码-->
                            <div class="modal fade" id="changepassword" tabindex="-1" role="dialog" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title">更改密码</h4>
                                        </div>
                                        <form th:action="@{/user/editPassword}" method="post" enctype="multipart/form-data">
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <label>用户账号</label>
                                                    <input type="text" name="id" th:value="${user.id}" readonly="readonly" hidden="hidden">
                                                    <input type="text" class="form-control" name="name"th:value="${user.name}" readonly="readonly">
                                                </div>
                                                <div class="form-group">
                                                    <label>原密码</label>
                                                    <input type="password" class="form-control" name="password"  required="required">
                                                    <p th:if="${isPassword}==true" class="haveWrong">*密码错误</p>
                                                </div>
                                                <div class="form-group">
                                                    <label >新密码</label>
                                                    <input type="password" class="form-control" name="newpassword" required="required">
                                                </div>
                                                <div class="form-group">
                                                    <label >再次确认新密码</label>
                                                    <input type="password" class="form-control" name="checkedpassword" required="required">
                                                    <p th:if="${isEquals}">*两次密码不一致</p>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
                                                <button type="submit" class="btn btn-success">确认修改</button>
                                            </div>
                                        </form>
                                    </div><!-- /.modal-content -->
                                </div><!-- /.modal -->
                            </div>


                            <!--更改用户密码-->
                            <div class="modal fade" id="changeUserInfo" tabindex="-1" role="dialog" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            <h4 class="modal-title">更改用户信息</h4>
                                        </div>
                                        <form th:action="@{/user/editUserInfo}" method="post" enctype="multipart/form-data">
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <label>用户名</label>
                                                    <input type="text" name="id" th:value="${user.id}" readonly="readonly" hidden="hidden">
                                                    <input type="text" class="form-control" name="shoId"th:value="${user.shoId}">
                                                </div>
                                                <div class="form-group">
                                                    <label>电话</label>
                                                    <input type="text" class="form-control" name="phone" th:value="${user.phone}" required="required">
                                                </div>
                                                <div class="form-group">
                                                    <label >邮箱</label>
                                                    <input type="email" class="form-control" name="email" th:value="${user.email}" required="required">
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
                                                <button type="submit" class="btn btn-success">确认修改</button>
                                            </div>
                                        </form>
                                    </div><!-- /.modal-content -->
                                </div><!-- /.modal -->
                            </div>

                        </div>
                        <div class="boxBd">
                            <h4>地址管理</h4>
                            <div class="clearFix addressList">
                                <ul>
                                        <li th:each="myaddress:${addresses}">
                                            <div class="myAddress">
                                                <div class="userInfo">
                                                    <input type="radio" th:value="${myaddress.id}" name="checkedaddress" hidden="hidden">
                                                    <label th:text="${myaddress.tUName}">范灿</label>
                                                    <span th:text="${myaddress.phone}">12345678987</span>
                                                </div>
                                                <div class="addressDetail">
                                                    <h6 class="province" th:text="${myaddress.province}">四川省</h6>
                                                    <h6 class="city" th:text="${myaddress.city}">成都市</h6>
                                                    <h6 class="county" th:text="${myaddress.county}">成华区</h6>
                                                    <h6 class="town" th:text="${myaddress.town}">猛追湾</h6>
                                                    <p th:text="${myaddress.detail}">电子科技大学</p>
                                                </div>
                                                <div class="addressSub">
                                                    <button  class="deleteModal btn" th:value="${myaddress.id}"><img src="../static/image/checkout/delete.png" th:src="@{/image/checkout/delete.png}">删除</button>
                                                    <button class="btn editAddress" data-toggle="modal" th:attr="data-target='#'+${myaddress.id}"> <img src="../static/image/checkout/edit.png" th:src="@{/image/checkout/edit.png}">编辑</button>
                                                </div>
                                                <!--编辑地址信息-->
                                                <div class="modal fade" th:id="${myaddress.id}" tabindex="-1" role="dialog" aria-hidden="true">
                                                    <div class="modal-dialog">
                                                        <div class="modal-content">
                                                            <div class="modal-header">
                                                                <h4 class="modal-title">修改收货地址</h4>
                                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                            </div>
                                                            <form th:action="@{/user/editAddress}" method="post" enctype="multipart/form-data">
                                                                <div class="modal-body">
                                                                    <div class="form-group">
                                                                        <label>姓名</label>
                                                                        <input type="text" name="id" th:value="${myaddress.id}" readonly="readonly" hidden="hidden">
                                                                        <input type="text" class="form-control"  name="tUName" th:value="${myaddress.tUName}"  required="required">
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label>联系方式</label>
                                                                        <input type="tel" class="form-control"  name="phone" th:value="${myaddress.phone}" required="required">
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label>地址</label>
                                                                        <input type="text"  name="province" th:value="${myaddress.province}" required="required">
                                                                        <input type="text"  name="city" th:value="${myaddress.city}" required="required">
                                                                        <input type="text"  name="county" th:value="${myaddress.county}"  required="required">
                                                                        <input type="text"  name="town" th:value="${myaddress.town}" required="required">
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label>详细地址</label>
                                                                        <textarea class="form-control" rows="3"  name="detail"  th:value="${myaddress.detail}" required="required"></textarea>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
                                                                    <button type="submit" class="btn btn-success">保存</button>
                                                                </div>
                                                            </form>
                                                        </div><!-- /.modal-content -->
                                                    </div><!-- /.modal -->
                                                </div>
                                            </div>
                                        </li>
                                    <li id="addressEmpty">
                                        <a  data-toggle="modal" data-target="#addressModal">
                                            <img src="../static/image/checkout/add.png" th:src="@{/image/checkout/add.png}">
                                            <br/><span>新增收货地址</span>
                                        </a>
                                    </li>

                                </ul>
                                <!--//新增收货地址模态框-->
                                <div class="modal fade" id="addressModal" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                <h4 class="modal-title" id="myModalLabel">添加收货地址</h4>
                                            </div>
                                            <form role="form" th:action="@{/user/addAddress}" method="post" enctype="multipart/form-data">
                                                <div class="modal-body">
                                                    <div class="form-group">
                                                        <label>姓名</label>
                                                        <input type="text" class="form-control" id="tUName" th:field="${addaddress.tUName}" placeholder="请输入姓名" required="required">
                                                    </div>
                                                    <div class="form-group">
                                                        <label>联系方式</label>
                                                        <input type="tel" class="form-control" id="phone" th:field="${addaddress.phone}" placeholder="请输入联系方式" required="required">
                                                    </div>
                                                    <div class="form-group">
                                                        <label>地址</label>
                                                        <input type="text" id="province" th:field="${addaddress.province}" placeholder="省/自治区/直辖市" required="required">
                                                        <input type="text" id="city" th:field="${addaddress.city}" placeholder="市/区" required="required">
                                                        <input type="text" id="county" th:field="${addaddress.county}" placeholder="县/市辖区" required="required">
                                                        <input type="text" id="town" th:field="${addaddress.town}" placeholder="街道/镇/乡" required="required">
                                                    </div>
                                                    <div class="form-group">
                                                        <label>详细地址</label>
                                                        <textarea class="form-control" rows="3" id="detail" th:field="${addaddress.detail}" required="required"></textarea>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-danger" data-dismiss="modal">关闭</button>
                                                    <button type="submit" class="btn btn-success">保存</button>
                                                </div>
                                            </form>
                                        </div><!-- /.modal-content -->
                                    </div><!-- /.modal -->
                                </div>

                                <!--删除收货地址模态框-->
                                <div class="modal fade" id="deleteaddress" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h4 class="modal-title">删除商品</h4>
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                            </div>
                                            <form th:action="@{/user/deleteAddress}" method="post" enctype="multipart/form-data">
                                                <div class="modal-body">
                                                    <div class="form-group">
                                                        <label>您将删除的地址编号为</label>
                                                        <input type="text" class="form-control" name="id" readonly="readonly">
                                                        <p style="color: red">地址删除后无法恢复,确认删除吗？</p>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-success" data-dismiss="modal">关闭</button>
                                                    <button type="submit" class="btn btn-danger">确认删除</button>
                                                </div>
                                            </form>
                                        </div><!-- /.modal-content -->
                                    </div><!-- /.modal -->
                                </div>



                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--页尾-->
<div class="container lastNav">
    <hr>
    <div class="col-md-3">

        <ul>帮助中心
            <li><a href="">账户管理</a></li>
            <li><a href="">购物指南</a></li>
            <li><a href="">订单操作</a></li>
            <li><a href="">常见问题</a></li>
        </ul>
    </div>
    <div class="col-md-3">
        <ul>服务支持
            <li><a href="">线下门店</a></li>
            <li><a href="">售后政策</a></li>
            <li><a href="">服务网点</a></li>
            <li><a href="">相关下载</a></li>
        </ul>
    </div>
    <div class="col-md-3">
        <ul id="aboutUs">关于我们
            <li><a href="">了解HK</a></li>
            <li><a href="">加入我们</a></li>
            <li><a href="">新浪微博</a></li>
            <li><a href="">联系我们</a></li>
        </ul>
    </div>
    <div class="col-md-3">
        <ul>特色服务
            <li><a href="">会员特权</a></li>
            <li><a href="">防伪查询</a></li>
            <li><a href="">积分兑换</a></li>
            <li><a href="">企业服务</a></li>
        </ul>
    </div>
</div>

<script type="text/javascript">
    $(function () {

        $(".deleteModal").click(function () { //删除功能模态框的调用
            var proid=$(this).val();
            $("#deleteaddress").modal('show');
            $("#deleteaddress input").val(proid);
        });
    });

</script>
</body>

</html>